<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ì¸ì¹´ë§ˆíŠ¸ ê°€ê²©í‘œ (ëª¨ë“ ë©”ë‰´)</title>

  <style>
    :root{
      --bg:#0b0f14;
      --card:#121821;
      --muted:#9fb3c8;
      --txt:#e8f0f7;
      --border:#1f2a38;
    }
    *{box-sizing:border-box;}

    body{
      margin:0;
      background:var(--bg);
      color:var(--txt);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Pretendard,Malgun Gothic,sans-serif;
      max-width:100%;
      overflow-x:hidden;
    }

    /* ------------ ê³µí†µ ë ˆì´ì•„ì›ƒ ------------ */
    .wrap{
      max-width:1100px;
      margin:0 auto;
      padding:96px 12px 24px; /* ìƒë‹¨ í—¤ë” ë†’ì´ë§Œí¼ ì—¬ë°± */
    }

    table{
      width:100%;
      border-collapse:collapse;
      table-layout:fixed; /* ê° ì—´ í­ ê³ ì • ë ˆì´ì•„ì›ƒ */
    }
    th,td{
      border-bottom:1px solid #1b2431;
      padding:10px 8px;
      font-size:14px;
      vertical-align:middle;
    }
    td.right,th.right{text-align:right;}

    .muted{color:var(--muted);}

    /* ------------ ìƒë‹¨ ê³ ì • í—¤ë” (ì œëª© + í•©ê³„ + ì´ˆê¸°í™”) ------------ */
    header.incamart-top{
      position:fixed;
      top:0;
      left:0;
      right:0;
      z-index:1000;
      background:#05070b;
      border-bottom:1px solid rgba(255,255,255,0.08);
      box-shadow:0 2px 8px rgba(0,0,0,0.35);
    }
    header.incamart-top .inner{
      max-width:1100px;
      margin:0 auto;
      padding:4px 8px 6px;
    }
    header.incamart-top .top-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:6px;
      margin-bottom:4px;
    }
    header.incamart-top h1{
      margin:0;
      font-size:14px;
      font-weight:700;
    }
    header.incamart-top .actions{
      flex-shrink:0;
    }
    header.incamart-top .btn-reset{
      padding:5px 9px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.18);
      background:#1a2432;
      color:#e8f0f7;
      font-weight:600;
      font-size:12px;
    }
    header.incamart-top .btn-reset:active{
      transform:translateY(1px);
    }

    /* í•©ê³„ ìƒì */
    .totals{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:6px;
    }
    .totals .box{
      background:#111821;
      border:1px solid var(--border);
      border-radius:12px;
      padding:8px 10px;
    }
    .totals .label{
      font-size:11px;
      color:var(--muted);
      margin-bottom:2px;
    }
    .totals .v{
      font-size:15px;
      font-weight:800;
    }

    /* ------------ ìƒí’ˆ í…Œì´ë¸” ì¹´ë“œ ------------ */
    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:16px;
      overflow:hidden;
    }

    .table-wrap{
      overflow-y:auto;
      overflow-x:hidden;
    }
    thead th{
      position:sticky;
      top:0;
      background:#0f1520;
      text-align:left;
      z-index:5;
    }

    /* ===== ìˆ˜ëŸ‰ ì…ë ¥ì¹¸ (ê°€ë¡œÂ·ì„¸ë¡œ ì™„ì „ ê³ ì •) ===== */
    input.qty{
      box-sizing:border-box;
      display:block;
      width:100%;
      min-width:100%;
      max-width:100%;
      height:46px;
      min-height:46px;
      max-height:46px;
      padding:10px 12px;
      font-size:18px;
      line-height:1.2;
      border-radius:14px;
      border:1px solid var(--border);
      background:#0c121a;
      color:var(--txt);
      text-align:center;
      -webkit-appearance:none;
      appearance:none;
      transition:none;
    }
    input[type=number]::-webkit-outer-spin-button,
    input[type=number]::-webkit-inner-spin-button{
      -webkit-appearance:none;
      margin:0;
    }
    input[type=number]{-moz-appearance:textfield;}

    /* í¬ì»¤ìŠ¤ ìƒíƒœì—ì„œë„ í¬ê¸° ë¶ˆë³€ */
    input.qty:focus{
      outline:none;
      border-color:#f5c14b;
      box-shadow:0 0 0 2px rgba(245,193,75,0.6);
      width:100%;
      min-width:100%;
      max-width:100%;
      height:46px;
      min-height:46px;
      max-height:46px;
      padding:10px 12px;
      font-size:18px;
    }

    /* 5ë²ˆì§¸ ì—´(ìˆ˜ëŸ‰) í­ ê³ ì • */
    thead th:nth-child(5),
    tbody td:nth-child(5){
      width:120px;
    }

    /* 6~8ë²ˆì§¸ ì—´(í•©ê³„) í­ ì œí•œ + ë§ì¤„ì„í‘œ ì²˜ë¦¬ â†’ ìˆ˜ëŸ‰ ì¹¸ ì•ˆ ì¤„ì–´ë“¤ê²Œ */
    thead th:nth-child(6),
    thead th:nth-child(7),
    thead th:nth-child(8),
    tbody td:nth-child(6),
    tbody td:nth-child(7),
    tbody td:nth-child(8){
      max-width:110px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    tfoot td{font-weight:800;}

    /* ------------ ëª¨ë°”ì¼ ìµœì í™” (<=640px) ------------ */
    @media (max-width:640px){
      header.incamart-top .inner{
        padding:4px 8px 6px;
      }
      header.incamart-top h1{
        font-size:13px;
      }
      .wrap{
        padding:88px 10px 20px;
      }

      .totals{
        gap:4px;
      }
      .totals .box{
        padding:7px 9px;
      }
      .totals .v{
        font-size:14px;
      }

      /* ëª¨ë°”ì¼: ë‹¨ê°€/í•©ê³„ ìˆ¨ê¸°ê³ , ìƒí’ˆëª…+ìˆ˜ëŸ‰ë§Œ */
      thead th:nth-child(2),
      thead th:nth-child(3),
      thead th:nth-child(4),
      thead th:nth-child(6),
      thead th:nth-child(7),
      thead th:nth-child(8),
      tbody td:nth-child(2),
      tbody td:nth-child(3),
      tbody td:nth-child(4),
      tbody td:nth-child(6),
      tbody td:nth-child(7),
      tbody td:nth-child(8){
        display:none;
      }

      /* ğŸ‘‰ ìƒí’ˆëª… 65% + ìˆ˜ëŸ‰ 35%ë¡œ í™”ë©´ ê½‰ ì±„ìš°ê¸° */
      thead th:nth-child(1),
      tbody td:nth-child(1){
        width:65% !important;
        padding-left:12px;
        text-align:left;
      }

      thead th:nth-child(5),
      tbody td:nth-child(5){
        width:35% !important;
        padding-right:12px;
        text-align:center;   /* ìˆ˜ëŸ‰ ìˆ«ì/í—¤ë” ì¤‘ì•™ ì •ë ¬ */
      }

      /* ìˆ˜ëŸ‰ ì…ë ¥ì¹¸ ì¡°ê¸ˆ ë” í¬ê²Œ (ëª¨ë°”ì¼ ì „ìš©) */
      input.qty{
        height:48px;
        min-height:48px;
        max-height:48px;
        font-size:18px;
      }
      input.qty:focus{
        height:48px;
        min-height:48px;
        max-height:48px;
        font-size:18px;
      }
    }
  </style>
</head>
<body>
  <!-- ìƒë‹¨ ê³ ì • ì˜ì—­ -->
  <header class="incamart-top">
    <div class="inner">
      <div class="top-row">
        <h1>ì¸ì¹´ë§ˆíŠ¸ ê°€ê²©í‘œ (ê°€ê²© ìë™ í•©ì‚°)</h1>
        <div class="actions">
          <button type="button" class="btn-reset" id="btn-reset">ì´ˆê¸°í™”</button>
        </div>
      </div>
      <div class="totals">
        <div class="box">
          <div class="label">KRW ì´í•©</div>
          <div class="v" id="sum2-krw">â‚© 0</div>
        </div>
        <div class="box">
          <div class="label">USD ì´í•©</div>
          <div class="v" id="sum2-usd">$ 0</div>
        </div>
        <div class="box">
          <div class="label">IDR ì´í•©</div>
          <div class="v" id="sum2-idr">Rp 0</div>
        </div>
      </div>
    </div>
  </header>

  <!-- ë³¸ë¬¸ -->
  <main class="wrap">
    <div class="card">
      <div class="table-wrap">
        <table id="tbl">
          <thead>
            <tr>
              <th style="width:40%">ìƒí’ˆëª…</th>
              <th class="right">ë‹¨ê°€(â‚©)</th>
              <th class="right">ë‹¨ê°€($)</th>
              <th class="right">ë‹¨ê°€(Rp)</th>
              <th class="right">ìˆ˜ëŸ‰</th>
              <th class="right">í•©ê³„(â‚©)</th>
              <th class="right">í•©ê³„($)</th>
              <th class="right">í•©ê³„(Rp)</th>
            </tr>
          </thead>
          <tbody id="body"></tbody>
          <tfoot>
            <tr>
              <td class="right" colspan="5">ì´ í•©ê³„</td>
              <td class="right" id="sum-krw">â‚© 0</td>
              <td class="right" id="sum-usd">$ 0</td>
              <td class="right" id="sum-idr">Rp 0</td>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>
  </main>

<script>
  const PRODUCTS = [
    {"name":"ì—˜ë¦½ìŠ¤ í—¤ì–´ì˜¤ì¼","krw":10000.0,"usd":7.0,"idr":100000.0},
    {"name":"WOCA ì´ˆì½œë¦¿","krw":2500.0,"usd":2.0,"idr":30000.0},
    {"name":"YABA ê·¸ë˜ë†€ë¼","krw":2500.0,"usd":2,"idr":30000.0},
    {"name":"YABA ìºìŠˆë„›","krw":1500.0,"usd":1.5,"idr":20000.0},
    {"name":"ë©”ë£¨ë°œë¦¬ ì½”ì½”ë„›ì¹©","krw":1500.0,"usd":1.5,"idr":20000.0},
    {"name":"íí…”ë¼ì‹±ì½˜ ê°ìì¹©","krw":500.0,"usd":0.5,"idr":5000.0},
    {"name":"ë³‘ë§¥ì£¼","krw":2500.0,"usd":2,"idr":30000.0},
    {"name":"ìº”ë§¥ì£¼","krw":2000.0,"usd":1.5,"idr":25000.0},
    {"name":"ëª¨ë“  ìŒë£Œ","krw":500.0,"usd":0.5,"idr":5000.0},
    {"name":"ëª¨ë“  ì‘ì€ ë¼ë©´","krw":1500.0,"usd":1.0,"idr":15000.0},
    {"name":"ëª¨ë“  í°ë¼ë©´","krw":2000.0,"usd":1.5,"idr":25000.0},
    {"name":"ëª¨ê¸°ê¸°í”¼ì œ","krw":1500.0,"usd":1.0,"idr":15000.0},
    {"name":"í…€ë¸”ëŸ¬ ë‹¨ì¼ êµ¬ë§¤ì‹œ ê²€ì • OR í°ìƒ‰","krw":20000.0,"usd":15.0,"idr":200000.0},
    {"name":"í…€ë¸”ëŸ¬ SET êµ¬ë§¤ì‹œ ê²€ì • + í°ìƒ‰","krw":35000.0,"usd":25.0,"idr":350000.0},
    {"name":"ì—ì½”ë°±","krw":10000.0,"usd":7.0,"idr":100000.0}
  ];

  function fmtKRW(v){return 'â‚© ' + (Math.round(v)||0).toLocaleString('ko-KR');}
  function fmtUSD(v){return '$ ' + (Math.round((v+Number.EPSILON)*100)/100).toLocaleString('en-US');}
  function fmtIDR(v){return 'Rp ' + (Math.round(v)||0).toLocaleString('id-ID');}

  function rowHTML(p, i){
    return `
      <tr>
        <td><div>${p.name}</div></td>
        <td class="right">${p.krw!=null?fmtKRW(p.krw):'-'}</td>
        <td class="right">${p.usd!=null?fmtUSD(p.usd):'-'}</td>
        <td class="right">${p.idr!=null?fmtIDR(p.idr):'-'}</td>
        <td class="right">
          <input
            class="qty"
            type="number"
            inputmode="numeric"
            pattern="[0-9]*"
            min="0"
            step="1"
            value="0"
            data-i="${i}"
            oninput="recalc()"
          />
        </td>
        <td class="right" id="r-krw-${i}">â‚© 0</td>
        <td class="right" id="r-usd-${i}">$ 0</td>
        <td class="right" id="r-idr-${i}">Rp 0</td>
      </tr>`;
  }

  function mount(){
    const tbody = document.getElementById('body');
    tbody.innerHTML = PRODUCTS.map((p,i)=>rowHTML(p,i)).join('');
  }

  function recalc(){
    let sumK=0, sumU=0, sumI=0;
    document.querySelectorAll('input.qty').forEach(inp=>{
      const i = +inp.dataset.i;
      const q = +inp.value||0;
      const p = PRODUCTS[i];
      const k = (p.krw??0)*q;
      const u = (p.usd??0)*q;
      const d = (p.idr??0)*q;
      sumK += k; sumU += u; sumI += d;
      document.getElementById('r-krw-'+i).textContent = fmtKRW(k);
      document.getElementById('r-usd-'+i).textContent = fmtUSD(u);
      document.getElementById('r-idr-'+i).textContent = fmtIDR(d);
    });
    document.getElementById('sum-krw').textContent = fmtKRW(sumK);
    document.getElementById('sum-usd').textContent = fmtUSD(sumU);
    document.getElementById('sum-idr').textContent = fmtIDR(sumI);
    document.getElementById('sum2-krw').textContent = fmtKRW(sumK);
    document.getElementById('sum2-usd').textContent = fmtUSD(sumU);
    document.getElementById('sum2-idr').textContent = fmtIDR(sumI);
  }

  // í™”ë©´ ë†’ì´ì— ë§ì¶° ë¦¬ìŠ¤íŠ¸ ì˜ì—­ ì¡°ì •
  function adjustTableHeight(){
    const tw = document.querySelector('.table-wrap');
    if (!tw) return;
    const rect = tw.getBoundingClientRect();
    const vh = (window.visualViewport && window.visualViewport.height) || window.innerHeight;
    const available = vh - rect.top - 8;  // ì•„ë˜ìª½ ì—¬ìœ 
    if (available > 0){
      tw.style.maxHeight = available + 'px';
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    mount();
    recalc();
    adjustTableHeight();

    // ìˆ˜ëŸ‰ í¬ì»¤ìŠ¤ ì‹œ 0 ì§€ìš°ê³ , ë¹„ì›Œë‘ë©´ ë‹¤ì‹œ 0
    document.addEventListener('focusin', e => {
      if (e.target.classList && e.target.classList.contains('qty')){
        if (e.target.value === '0') e.target.value = '';
      }
    });
    document.addEventListener('focusout', e => {
      if (e.target.classList && e.target.classList.contains('qty')){
        if (e.target.value.trim() === '') e.target.value = '0';
      }
    });

    // ì´ˆê¸°í™” ë²„íŠ¼
    document.getElementById('btn-reset').addEventListener('click', () => {
      document.querySelectorAll('input.qty').forEach(inp => inp.value = '0');
      recalc();
      window.scrollTo({top:0,behavior:'smooth'});
    });

    if (window.visualViewport){
      visualViewport.addEventListener('resize', adjustTableHeight);
      visualViewport.addEventListener('scroll', adjustTableHeight);
    }
    window.addEventListener('resize', adjustTableHeight);
    window.addEventListener('orientationchange', adjustTableHeight);
  });
</script>

</body>
</html>
