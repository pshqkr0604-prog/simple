<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>인카마트 가격표 (모든메뉴)</title>
  <style>
    :root{
      --bg:#0b0f14;
      --card:#121821;
      --muted:#9fb3c8;
      --txt:#e8f0f7;
      --border:#1f2a38;
    }
    *{box-sizing:border-box;}

    body{
      margin:0;
      background:var(--bg);
      color:var(--txt);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Pretendard,Malgun Gothic,sans-serif;
      max-width:100%;
      overflow-x:hidden;
    }

    /* ------------ 공통 레이아웃 ------------ */
    /* 상단 헤더 높이에 맞춰 적당히 여백 (이전 104px → 96px) */
    .wrap{
      max-width:1100px;
      margin:0 auto;
      padding:96px 12px 24px;
    }

    table{
      width:100%;
      border-collapse:collapse;
    }
    th,td{
      border-bottom:1px solid #1b2431;
      padding:10px 8px;
      font-size:14px;
      vertical-align:middle;
    }
    td.right,th.right{text-align:right;}

    .muted{color:var(--muted);}
    .stock{font-size:12px;color:#b7c8d8;}

    /* ------------ 상단 고정 헤더 (제목 + 합계 + 초기화) ------------ */
    header.incamart-top{
      position:fixed;
      top:0;
      left:0;
      right:0;
      z-index:1000;
      background:#05070b;
      border-bottom:1px solid rgba(255,255,255,0.08);
      box-shadow:0 2px 8px rgba(0,0,0,0.35);
    }
    header.incamart-top .inner{
      max-width:1100px;
      margin:0 auto;
      padding:4px 8px 6px;   /* 살짝 줄인 패딩 */
    }
    header.incamart-top .top-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:6px;
      margin-bottom:4px;     /* 기존 8px → 4px */
    }
    header.incamart-top h1{
      margin:0;
      font-size:14px;        /* 기존 15px → 14px */
      font-weight:700;
    }
    header.incamart-top .actions{
      flex-shrink:0;
    }
    header.incamart-top .btn-reset{
      padding:5px 9px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.18);
      background:#1a2432;
      color:#e8f0f7;
      font-weight:600;
      font-size:12px;
    }
    header.incamart-top .btn-reset:active{
      transform:translateY(1px);
    }

    /* 합계 상자 */
    .totals{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:6px;
    }
    .totals .box{
      background:#111821;
      border:1px solid var(--border);
      border-radius:12px;
      padding:8px 10px;   /* 기존보다 약간만 작게 */
    }
    .totals .label{
      font-size:11px;
      color:var(--muted);
      margin-bottom:2px;
    }
    .totals .v{
      font-size:15px;        /* 기존 16px → 15px */
      font-weight:800;
    }

    /* ------------ 상품 테이블 카드 (이전 버전 그대로) ------------ */
    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:16px;
      overflow:hidden;
    }

    /* 테이블 헤더(상품명/수량) 고정 – 리스트 부만 스크롤 */
    .table-wrap{
      max-height:calc(100vh - 190px); /* 상단 줄인 이전 버전 값 그대로 */
      overflow-y:auto;
      overflow-x:hidden;
    }
    thead th{
      position:sticky;
      top:0;
      background:#0f1520;
      text-align:left;
      z-index:5;
    }

    /* 수량 입력칸 (이전 “상단 여백 최소화 버전” 그대로) */
    input.qty{
      width:100%;
      min-width:0;
      min-height:40px;
      height:42px;
      padding:8px 10px;
      font-size:16px;
      border-radius:12px;
      border:1px solid var(--border);
      background:#0c121a;
      color:var(--txt);
      -webkit-appearance:none;
      appearance:none;
    }
    input[type=number]::-webkit-outer-spin-button,
    input[type=number]::-webkit-inner-spin-button{
      -webkit-appearance:none;
      margin:0;
    }
    input[type=number]{-moz-appearance:textfield;}

    thead th:nth-child(5),
    tbody td:nth-child(5){
      width:120px;
    }

    tfoot td{font-weight:800;}

    /* ------------ 모바일 최적화 (<=640px) ------------ */
    @media (max-width:640px){
      header.incamart-top .inner{
        padding:4px 8px 6px;
      }
      header.incamart-top h1{
        font-size:13px;
      }
      .wrap{
        padding:88px 10px 20px;  /* 이전 96px → 88px */
      }

      .totals{
        gap:4px;
      }
      .totals .box{
        padding:7px 9px;
      }
      .totals .v{
        font-size:14px;
      }

      /* 상품테이블: 단가/합계 숨기고, 상품명+수량만 */
      thead th:nth-child(2),
      thead th:nth-child(3),
      thead th:nth-child(4),
      thead th:nth-child(6),
      thead th:nth-child(7),
      thead th:nth-child(8),
      tbody td:nth-child(2),
      tbody td:nth-child(3),
      tbody td:nth-child(4),
      tbody td:nth-child(6),
      tbody td:nth-child(7),
      tbody td:nth-child(8){
        display:none;
      }

      thead th:nth-child(1){width:auto;}
      thead th:nth-child(5){
        text-align:right;
        width:110px;
      }
      tbody td:nth-child(5){
        text-align:right;
      }

      input.qty{
        height:44px;
        font-size:17px;
      }

      .table-wrap{
        max-height:calc(100vh - 185px); /* 이전 버전값 그대로 */
      }
    }
  </style>
</head>
<body>
  <!-- 상단 고정 영역 -->
  <header class="incamart-top">
    <div class="inner">
      <div class="top-row">
        <h1>인카마트 가격표 (가격 자동 합산)</h1>
        <div class="actions">
          <button type="button" class="btn-reset" id="btn-reset">초기화</button>
        </div>
      </div>
      <div class="totals">
        <div class="box">
          <div class="label">KRW 총합</div>
          <div class="v" id="sum2-krw">₩ 0</div>
        </div>
        <div class="box">
          <div class="label">USD 총합</div>
          <div class="v" id="sum2-usd">$ 0</div>
        </div>
        <div class="box">
          <div class="label">IDR 총합</div>
          <div class="v" id="sum2-idr">Rp 0</div>
        </div>
      </div>
    </div>
  </header>

  <!-- 본문 -->
  <main class="wrap">
    <div class="card">
      <div class="table-wrap">
        <table id="tbl">
          <thead>
            <tr>
              <th style="width:40%">상품명</th>
              <th class="right">단가(₩)</th>
              <th class="right">단가($)</th>
              <th class="right">단가(Rp)</th>
              <th class="right">수량</th>
              <th class="right">합계(₩)</th>
              <th class="right">합계($)</th>
              <th class="right">합계(Rp)</th>
            </tr>
          </thead>
          <tbody id="body"></tbody>
          <tfoot>
            <tr>
              <td class="right" colspan="5">총 합계</td>
              <td class="right" id="sum-krw">₩ 0</td>
              <td class="right" id="sum-usd">$ 0</td>
              <td class="right" id="sum-idr">Rp 0</td>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>
  </main>

<script>
  const PRODUCTS = [
    {"name":"엘립스 헤어오일","krw":10000.0,"usd":7.0,"idr":100000.0,"stock":"14"},
    {"name":"WOCA 초콜릿","krw":2500.0,"usd":2.0,"idr":30000.0,"stock":"28"},
    {"name":"YABA 그래놀라","krw":2500.0,"usd":2,"idr":30000.0,"stock":"28"},
    {"name":"YABA 캐슈넛","krw":1500.0,"usd":1.5,"idr":20000.0,"stock":"28"},
    {"name":"메루발리 코코넛칩","krw":1500.0,"usd":1.5,"idr":20000.0,"stock":"24"},
    {"name":"큐텔라싱콘 감자칩","krw":500.0,"usd":0.5,"idr":5000.0,"stock":"24"},
    {"name":"병맥주","krw":2500.0,"usd":2,"idr":30000.0,"stock":"150(144)"},
    {"name":"캔맥주","krw":2000.0,"usd":1.5,"idr":25000.0,"stock":"150(144)"},
    {"name":"모든 음료","krw":500.0,"usd":0.5,"idr":5000.0,"stock":"24"},
    {"name":"모든 작은 라면","krw":1500.0,"usd":1.0,"idr":15000.0,"stock":"18"},
    {"name":"모든 큰라면","krw":2000.0,"usd":1.5,"idr":25000.0,"stock":"33"},
    {"name":"모기기피제","krw":1500.0,"usd":1.0,"idr":15000.0,"stock":"14"},
    {"name":"텀블러 단일 구매시 검정 OR 흰색","krw":20000.0,"usd":15.0,"idr":200000.0,"stock":"nan"},
    {"name":"텀블러 SET 구매시 검정 + 흰색","krw":35000.0,"usd":25.0,"idr":350000.0,"stock":"nan"},
    {"name":"에코백","krw":10000.0,"usd":7.0,"idr":100000.0,"stock":"nan"}
  ];

  function fmtKRW(v){return '₩ ' + (Math.round(v)||0).toLocaleString('ko-KR');}
  function fmtUSD(v){return '$ ' + (Math.round((v+Number.EPSILON)*100)/100).toLocaleString('en-US');}
  function fmtIDR(v){return 'Rp ' + (Math.round(v)||0).toLocaleString('id-ID');}

  function rowHTML(p, i){
    return `
      <tr>
        <td>
          <div>${p.name}</div>
          ${p.stock?`<div class="stock">재고: ${p.stock}</div>`:''}
        </td>
        <td class="right">${p.krw!=null?fmtKRW(p.krw):'-'}</td>
        <td class="right">${p.usd!=null?fmtUSD(p.usd):'-'}</td>
        <td class="right">${p.idr!=null?fmtIDR(p.idr):'-'}</td>
        <td class="right">
          <input
            class="qty"
            type="number"
            inputmode="numeric"
            pattern="[0-9]*"
            min="0"
            step="1"
            value="0"
            data-i="${i}"
            oninput="recalc()"
          />
        </td>
        <td class="right" id="r-krw-${i}">₩ 0</td>
        <td class="right" id="r-usd-${i}">$ 0</td>
        <td class="right" id="r-idr-${i}">Rp 0</td>
      </tr>`;
  }

  function mount(){
    const tbody = document.getElementById('body');
    tbody.innerHTML = PRODUCTS.map((p,i)=>rowHTML(p,i)).join('');
  }

  function recalc(){
    let sumK=0, sumU=0, sumI=0;
    document.querySelectorAll('input.qty').forEach(inp=>{
      const i = +inp.dataset.i;
      const q = +inp.value||0;
      const p = PRODUCTS[i];
      const k = (p.krw??0)*q;
      const u = (p.usd??0)*q;
      const d = (p.idr??0)*q;
      sumK += k; sumU += u; sumI += d;
      document.getElementById('r-krw-'+i).textContent = fmtKRW(k);
      document.getElementById('r-usd-'+i).textContent = fmtUSD(u);
      document.getElementById('r-idr-'+i).textContent = fmtIDR(d);
    });
    document.getElementById('sum-krw').textContent = fmtKRW(sumK);
    document.getElementById('sum-usd').textContent = fmtUSD(sumU);
    document.getElementById('sum-idr').textContent = fmtIDR(sumI);
    document.getElementById('sum2-krw').textContent = fmtKRW(sumK);
    document.getElementById('sum2-usd').textContent = fmtUSD(sumU);
    document.getElementById('sum2-idr').textContent = fmtIDR(sumI);
  }

  document.addEventListener('DOMContentLoaded', () => {
    mount();
    recalc();

    // 수량 포커스 시 0 지우고, 비워두면 다시 0
    document.addEventListener('focusin', e => {
      if (e.target.classList && e.target.classList.contains('qty')){
        if (e.target.value === '0') e.target.value = '';
      }
    });
    document.addEventListener('focusout', e => {
      if (e.target.classList && e.target.classList.contains('qty')){
        if (e.target.value.trim() === '') e.target.value = '0';
      }
    });

    // 초기화 버튼
    document.getElementById('btn-reset').addEventListener('click', () => {
      document.querySelectorAll('input.qty').forEach(inp => inp.value = '0');
      recalc();
      window.scrollTo({top:0,behavior:'smooth'});
    });
  });
</script>

</body>
</html>
